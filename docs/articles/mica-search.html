<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mica Search API â€¢ micar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Mica Search API">
<meta property="og:description" content="micar">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">micar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/mica-dar.html">Mica Data Access Request API</a>
    </li>
    <li>
      <a href="../articles/mica-search.html">Mica Search API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/obiba/micar/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mica-search_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mica Search API</h1>
                        <h4 class="author">Yannick Marcon</h4>
            
            <h4 class="date">2021-09-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/obiba/micar/blob/master/vignettes/mica-search.Rmd"><code>vignettes/mica-search.Rmd</code></a></small>
      <div class="hidden name"><code>mica-search.Rmd</code></div>

    </div>

    
    
<p><a href="https://www.obiba.org/pages/products/mica/">Mica</a> provides some web services for searching content. The Mica R package exposes search related functions:</p>
<ul>
<li>search query can mix network, study, dataset and variable criteria,</li>
<li>RQL (Resource Query Language) support for expressing search requests (note that queries can be copied from Search page in the web UI),</li>
<li>results are data frames that can be used for subsequent filtering and reporting.</li>
</ul>
<p>Setup the connection with Mica, login with <em>anonymous</em> user and default password (to be changed):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://www.obiba.org/">micar</a></span><span class="op">)</span>
<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mica.login.html">mica.login</a></span><span class="op">(</span>url<span class="op">=</span><span class="st">"https://mica-demo.obiba.org"</span><span class="op">)</span></code></pre></div>
<p>Get the 10 first networks which datasets have variables matching the provided criteria:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.networks.html">mica.networks</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"variable(in(Mlstr_area.Lifestyle_behaviours,Drugs))"</span>, locale<span class="op">=</span><span class="st">"en"</span>, from<span class="op">=</span><span class="fl">0</span>, limit<span class="op">=</span><span class="fl">10</span><span class="op">)</span></code></pre></div>
<p>Get the 100 first studies matching the provided study criteria:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.studies.html">mica.studies</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"study(in(Mica_study.methods-design,cohort_study))"</span><span class="op">)</span></code></pre></div>
<p>Study populations and data collection events (DCE) can also be queried:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.study.populations.html">mica.study.populations</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"study(in(Mica_study.methods-design,cohort_study))"</span><span class="op">)</span>
<span class="fu"><a href="../reference/mica.study.dces.html">mica.study.dces</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"study(in(Mica_study.methods-design,cohort_study))"</span><span class="op">)</span></code></pre></div>
<p>Get some datasets which variables are about Drugs usage:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.datasets.html">mica.datasets</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"variable(in(Mlstr_area.Lifestyle_behaviours,Drugs))"</span><span class="op">)</span></code></pre></div>
<p>Get the corresponding variables:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.variables.html">mica.variables</a></span><span class="op">(</span><span class="va">m</span>, query<span class="op">=</span><span class="st">"variable(in(Mlstr_area.Lifestyle_behaviours,Drugs))"</span><span class="op">)</span></code></pre></div>
<p>The search query expression is based on the declared taxonomies, vocabularies and terms. The following functions allow to query for terms matching some open text criteria, for instance get the vocabulary terms about <em>cancer</em> across all the variable taxonomies:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.vocabularies.html">mica.vocabularies</a></span><span class="op">(</span><span class="va">m</span>, target<span class="op">=</span><span class="st">"variable"</span>, query<span class="op">=</span><span class="st">"cancer"</span>, locale <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></code></pre></div>
<p>Good practice is to free server resources by sending a logout request:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mica.logout.html">mica.logout</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></code></pre></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Yannick Marcon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
